import java.nio.file.Files

task moveMigrates {
    doLast {
        file("src/main/java").deleteDir()
        Files.move(file("remappedSrc").toPath(), file("src/main/java").toPath())
    }
}

migrateMappings {
    mappings("1.17-pre1+build.4")
}

tasks.moveMigrates.dependsOn(tasks.migrateMappings)

task doNothing {}

loom {
    runs {
        testmodClient {
            client()
            ideConfigGenerated project.rootProject == project
            name = "Testmod Client"
            source sourceSets.testmod
        }
        testmodServer {
            server()
            ideConfigGenerated project.rootProject == project
            name = "Testmod Server"
            source sourceSets.testmod
        }
    }
}